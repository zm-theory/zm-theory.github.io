<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- Google Search Console -->
  <meta name="google-site-verification" content="Hph_EoL7q-XHXSRWwijiGyxshOpkYYT5bCRxTyjdQjw" />

  <!-- Métadonnées -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="theme-color" content="#0a0f20" />
  <link rel="canonical" href="https://zm-theory.github.io/" />
  <meta name="language" content="fr" />
  <meta name="author" content="Mohammed Zerrouk" />

  <title>Théorie ZM — Cadre Informationnel Unifié pour la Physique Fondamentale</title>
  <meta name="description" content="La Théorie ZM propose un formalisme où espace-temps, lois physiques et conscience émergent d'un réseau d'information quantique. 12 prédictions testables. Référencé HAL-CNRS." />
  <meta name="keywords" content="Théorie ZM, pixels d'information quantique, cosmologie informationnelle, géométrie émergente, gravité quantique, conscience, théorie unifiée, HAL CNRS" />

  <!-- Open Graph -->
  <meta property="og:locale" content="fr_FR" />
  <meta property="og:site_name" content="Théorie ZM" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://zm-theory.github.io/" />
  <meta property="og:title" content="Théorie ZM — Cadre Informationnel Unifié pour la Physique Fondamentale" />
  <meta property="og:description" content="Formalisme unifié : espace-temps, lois physiques et conscience émergent d'un réseau d'information quantique. Prédictions testables disponibles." />
  <meta property="og:image" content="https://zm-theory.github.io/images/og-theoriezm.jpg" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Théorie ZM — Cadre Informationnel Unifié pour la Physique Fondamentale" />
  <meta name="twitter:description" content="Formalisme unifié : espace-temps et conscience émergent d'un réseau d'information quantique. 12 prédictions testables." />
  <meta name="twitter:image" content="https://zm-theory.github.io/images/og-theoriezm.jpg" />

  <!-- Icônes -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Données structurées -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"ScholarlyArticle",
    "headline":"Théorie ZM — Cadre Informationnel Unifié",
    "description":"Présentation du formalisme ZM où espace-temps, lois physiques et conscience émergent d'un réseau de pixels d'information quantique.",
    "inLanguage":"fr",
    "author":{"@type":"Person","name":"Mohammed Zerrouk"},
    "publisher":{"@type":"Organization","name":"HAL Archives Ouvertes"},
    "datePublished":"2024-12-01",
    "dateModified":"2025-01-15",
    "identifier":"hal-05186131v1"
  }
  </script>

  <!-- Styles -->
  <style>
    html, body{
      margin:0; padding:0; height:100%;
      font-family:"Georgia", serif;
      background:#000611; color:#f2f2f2;
      line-height:1.7; overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      text-rendering:optimizeLegibility;
    }
    
    /* Fond cosmique réaliste avec galaxies plus apparentes */
    #nebula{
      position:fixed; inset:0; z-index:0; pointer-events:none;
      background:
        /* Galaxie spirale principale - plus visible */
        radial-gradient(ellipse 1800px 1200px at 75% 25%, rgba(220,180,140,0.28), rgba(160,120,80,0.15) 35%, rgba(80,60,40,0.08) 55%, transparent 75%),
        /* Bras spiraux de la galaxie */
        conic-gradient(from 45deg at 75% 25%, transparent, rgba(255,200,150,0.12) 15%, transparent 25%, rgba(200,160,120,0.10) 40%, transparent 50%, rgba(180,140,100,0.08) 65%, transparent 75%, rgba(160,120,90,0.06) 90%, transparent),
        /* Galaxie lointaine */
        radial-gradient(ellipse 1400px 900px at 15% 70%, rgba(180,160,220,0.22), rgba(120,100,160,0.12) 40%, rgba(60,50,80,0.06) 65%, transparent 80%),
        /* Nébuleuses colorées */
        radial-gradient(1600px 1000px at 90% 15%, rgba(255,100,120,0.18), rgba(180,70,90,0.10) 45%, transparent 70%),
        radial-gradient(1200px 800px at 10% 20%, rgba(100,180,255,0.15), rgba(70,130,200,0.08) 50%, transparent 75%),
        radial-gradient(1000px 1200px at 50% 85%, rgba(160,100,255,0.12), rgba(120,70,200,0.06) 55%, transparent 80%),
        /* Voie lactée subtile */
        linear-gradient(25deg, transparent 20%, rgba(255,220,180,0.08) 35%, rgba(200,170,140,0.12) 50%, rgba(160,130,100,0.08) 65%, transparent 80%),
        /* Fond cosmique profond */
        radial-gradient(ellipse at 30% 40%, rgba(20,15,40,0.8) 0%, rgba(15,10,30,0.9) 50%, #000611 100%);
      filter:saturate(1.3) contrast(1.2) brightness(0.95);
      will-change:transform;
    }
    canvas.starfield{
      position:fixed; top:0; left:0; width:100vw; height:100vh;
      display:block; pointer-events:none;
    }
    #stars-far{ z-index:1; opacity:.95; }
    #stars-near{ z-index:2; opacity:.98; }

    /* Contenu */
    .content{
      max-width:960px; margin:0 auto; padding:2rem 2.5rem;
      background:rgba(8,12,20,0.75);
      border-radius:16px; box-shadow:0 0 32px 0 rgba(5,8,15,0.9);
      position:relative; z-index:10;
      backdrop-filter:blur(2px); -webkit-backdrop-filter:blur(2px);
    }

    /* En-tête crédibilité */
    .credentials{
      text-align:center; margin-bottom:1.5rem; padding:0.8rem 1rem;
      background:rgba(0,100,200,0.08); border:1px solid rgba(0,150,255,0.15);
      border-radius:8px; font-size:0.95rem;
    }
    .credentials-grid{
      display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr));
      gap:0.5rem; margin-top:0.5rem;
    }
    .credential-item{ color:#aad0ff; }

    /* Titres */
    .main-title{ text-align:center; font-size:2.2rem; font-weight:800; letter-spacing:.5px; margin-bottom:0.5rem; }
    .subtitle-top{ text-align:center; font-size:1.1rem; color:#aad0ff; font-style:italic; margin-bottom:.25rem; }
    .tagline{ text-align:center; font-size:1.15rem; color:#ffd76b; font-weight:600; margin:.5rem 0 1.2rem; }
    .hook{ text-align:center; font-size:1.1rem; color:#E6E6FA; margin-bottom:1.2rem; }

    /* Sections */
    .section{
      margin:2rem 0; padding:1.2rem 1.2rem;
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.1);
      border-radius:14px;
    }
    .section-title{
      text-align:center; font-size:1.4rem; color:#aad0ff; margin:.3rem 0 1rem; font-weight:700;
    }
    .section p{ margin:.7rem 0; }

    /* Résumé scientifique */
    .summary{
      margin:1.4rem auto 1.8rem; padding:1rem 1.2rem;
      background:rgba(0,191,255,0.08); border:1px solid rgba(0,191,255,0.22);
      border-radius:12px; max-width:860px;
    }
    .summary h2{ margin:.2rem 0 .6rem; text-align:center; color:#FFD700; font-size:1.3rem; }

    /* Formalisme */
    .formalism{
      background:rgba(255,255,255,0.06); padding:0.8rem 1rem;
      border-radius:8px; margin:1rem 0; font-family:monospace;
      border-left:3px solid #FFD700; color:#E6E6FA; font-size:0.95rem;
    }

    /* Blocs et citations */
    .highlight{ color:#FFD700; font-weight:700; }
    blockquote{
      margin:1rem; padding:.8rem 1rem;
      border-left:3px solid #8A2BE2; background:rgba(138,43,226,0.08);
      color:#cfd8ff; font-style:italic; border-radius:8px;
    }
    blockquote .author{ color:#FFD700; font-style:normal; font-weight:700; }

    /* Grilles prédictions */
    .predictions{
      display:grid; grid-template-columns:repeat(auto-fit, minmax(250px,1fr));
      gap:14px; margin-top:1rem;
    }
    .prediction-item{
      background:rgba(0,191,255,0.08);
      border:1px solid rgba(0,191,255,0.25);
      border-radius:10px; padding:.9rem 1rem;
    }
    .prediction-item h4{ color:#FFD700; margin:.2rem 0 .4rem; font-size:1rem; }

    /* Limitations */
    .limitations{
      background:rgba(255,150,0,0.06); border:1px solid rgba(255,150,0,0.15);
      padding:1rem; border-radius:10px; margin:1rem 0;
    }
    .limitations h3{ color:#ffb366; margin:0 0 0.5rem; font-size:1.1rem; }

    /* FAQ */
    .faq-grid{
      display:grid; grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
      gap:14px;
    }
    .faq-item{
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:10px; padding:.9rem 1rem;
    }
    .faq-item h3{ margin:.2rem 0 .4rem; color:#FFD700; font-size:1.05rem; }

    /* Appels à l'action */
    .cta{
      text-align:center; padding:1.4rem 1rem;
      background:linear-gradient(45deg, rgba(255,215,0,0.08), rgba(138,43,226,0.08));
      border-radius:16px; border:1px solid rgba(255,215,0,0.22);
      margin:2rem 0;
    }
    .cta .lead{ font-size:1.2rem; color:#FFD700; font-weight:700; }

    /* Boutons */
    .btn{
      display:inline-block; margin:.3em .4em; padding:.6em 1.1em;
      background:#222b40; color:#aad0ff; border-radius:8px;
      text-decoration:none; font-weight:700; border:1px solid #2d3b5a;
      transition:background .2s, color .2s, transform .08s;
    }
    .btn:hover{ background:#10101a; color:#fff; transform:translateY(-1px); }
    .btn-primary{ background:#3a4b7a; color:#fff; border-color:#4b5f9a; }
    .btn-primary:hover{ background:#273455; }

    /* Footer contact */
    .contact{
      margin-top:2rem; padding-top:1.2rem;
      border-top:1px solid #444; font-style:italic; font-size:.95rem;
    }

    /* Accessibilité animations */
    @media (prefers-reduced-motion: reduce){ #nebula{ background-attachment:fixed; } }
    noscript .nojs-bg{
      position:fixed; inset:0; z-index:1;
      background: radial-gradient(ellipse at center, rgba(255,255,255,.08) 0%, transparent 60%), #000611;
    }
  </style>
</head>

<body>
  <!-- Fonds -->
  <div id="nebula" aria-hidden="true"></div>
  <canvas id="stars-far" class="starfield" aria-hidden="true"></canvas>
  <canvas id="stars-near" class="starfield" aria-hidden="true"></canvas>
  <noscript><div class="nojs-bg" aria-hidden="true"></div></noscript>

  <div class="content">
    
    <!-- Crédibilité immédiate -->
    <div class="credentials">
      <div class="credentials-grid">
        <div class="credential-item">📋 HAL-05186131v1 (CNRS)</div>
        <div class="credential-item">🔬 12 prédictions testables</div>
        <div class="credential-item">📐 Formalisme mathématique complet</div>
      </div>
    </div>

    <!-- En-tête -->
    <h1 class="main-title">THÉORIE ZM</h1>
    <div class="subtitle-top">Cadre Informationnel Unifié</div>
    <div class="tagline">Extension Cohérente des Fondements de la Physique</div>
    <div class="hook">Une approche rigoureuse pour dépasser la dichotomie quantique-relativiste</div>
    <p style="text-align:center; max-width:820px; margin:0 auto 1.2rem;">
      Formalisme où espace-temps, lois physiques et conscience émergent d'un réseau de pixels d'information quantique avec prédictions expérimentalement vérifiables.
    </p>

    <!-- Résumé scientifique -->
    <section class="summary" id="resume">
      <h2>Synthèse du Cadre Théorique</h2>
      <p><strong>Postulat fondamental :</strong> La réalité physique émerge d'un réseau discret de pixels d'information quantique (PIQ). La connectivité de ce réseau génère la géométrie spatio-temporelle, ses régularités statistiques produisent les lois physiques, et l'intégration informationnelle au-delà d'un seuil critique φc donne naissance à la conscience. Le cadre propose 12 signatures expérimentales distinctes et un formalisme mathématique cohérent unissant mécanique quantique, relativité générale et théories de l'information.</p>
    </section>

    <!-- Le défi fondamental -->
    <section class="section">
      <h2 class="section-title">Le Défi de l'Unification</h2>
      <blockquote>
        « Le problème le plus profond de la physique théorique : la réconciliation de la relativité générale et de la mécanique quantique reste non résolu après un siècle de tentatives. » <span class="author">Communauté scientifique</span>
      </blockquote>
      <p>Toutes les approches traditionnelles (théorie des cordes, gravité quantique à boucles, géométrie non-commutative) partent du postulat que l'espace-temps est fondamental. <span class="highlight">La Théorie ZM inverse ce paradigme</span> en posant l'information comme substrat primaire.</p>
    </section>

    <!-- L'insight différenciateur -->
    <section class="section">
      <h2 class="section-title">L'Information comme Ontologie Première</h2>
      <blockquote>
        « It from Bit » — « L'information est physique » <span class="author">John Wheeler, Rolf Landauer</span>
      </blockquote>
      <p>Plutôt de postuler espace, temps et matière, <span class="highlight">nous dérivons ces concepts</span> comme propriétés émergentes d'un réseau informationnel discret. Cette inversion conceptuelle résout naturellement plusieurs paradoxes fondamentaux.</p>
      
      <div class="formalism">
        Métrique émergente : ds² = ∑ᵢⱼ Φᵢⱼ(I) dxⁱdxʲ<br>
        où Φᵢⱼ dépend de l'intégration informationnelle I<br>
        <br>
        Seuil de conscience : φc ≈ 2.8 ± 0.3 (unités d'information intégrée)
      </div>
    </section>

    <!-- Architecture informationnelle -->
    <section class="section">
      <h2 class="section-title">Architecture des Pixels d'Information Quantique</h2>
      <p>Les PIQ ne sont pas localisés dans l'espace-temps mais <span class="highlight">génèrent l'espace-temps par leur connectivité</span>. Intrication quantique, superposition et décohérence émergent naturellement de cette architecture. La géométrie résulte de motifs stables auto-organisés dans le réseau.</p>
      <blockquote>« Si vous voulez comprendre l'univers, pensez en termes d'énergie, fréquence et vibration. » <span class="author">Concept étendu aux patterns informationnels</span></blockquote>
    </section>

    <!-- Prédictions quantifiées -->
    <section class="section">
      <h2 class="section-title">Signatures Expérimentales Spécifiques</h2>
      <div class="predictions">
        <div class="prediction-item">
          <h4>Corrélations cosmiques</h4>
          <p>Distribution à loi de puissance avec exposant α = 2.3±0.1 dans les structures > 100 Mpc</p>
        </div>
        <div class="prediction-item">
          <h4>Seuil de conscience</h4>
          <p>φ = 2.8±0.3 bits/s dans systèmes intégrés. Mesurable via IIT et connectomique</p>
        </div>
        <div class="prediction-item">
          <h4>Déviations GR</h4>
          <p>Écarts de 10⁻⁶ dans régimes ultra-denses (ρ > 10¹⁵ kg/m³)</p>
        </div>
        <div class="prediction-item">
          <h4>Interférence PIQ</h4>
          <p>Signatures sub-planckiennes détectables par interférométrie gravitationnelle de 4ᵉ génération</p>
        </div>
      </div>
      
      <div class="limitations">
        <h3>Limitations reconnues</h3>
        <p>• Paramètres libres à calibrer expérimentalement • Transition classique-quantique non complètement résolue • Mécanisme d'émergence temporelle nécessite raffinement • Validation computationnelle intensive requise</p>
      </div>
    </section>

    <!-- Conscience structurelle -->
    <section class="section">
      <h2 class="section-title">Conscience comme Propriété Informationnelle</h2>
      <p>Au-delà du seuil critique φc, des <span class="highlight">boucles auto-référentielles stables</span> apparaissent dans le réseau. La conscience devient une propriété mesurable de l'intégration informationnelle, indépendante du substrat physique. Cette hypothèse est directement testable via neurotechnologies avancées.</p>
      <blockquote>« La conscience n'est pas produite par le cerveau mais accédée par lui, comme une antenne syntonisée sur des fréquences informationnelles spécifiques. » <span class="author">Implication théorique ZM</span></blockquote>
    </section>

    <!-- Appel de collaboration -->
    <section class="section cta">
      <div class="lead">Invitation à la Validation Collaborative</div>
      <p style="max-width:800px; margin:.6rem auto 0;">
        La physique théorique progresse par validation expérimentale rigoureuse. Cette théorie propose un cadre falsifiable avec signatures mesurables. L'époque demande des approches transdisciplinaires audacieuses mais méthodiques.
      </p>
    </section>

    <!-- FAQ optimisée -->
    <section class="section" id="faq">
      <h2 class="section-title">Questions Techniques Fréquentes</h2>
      <div class="faq-grid">
        <div class="faq-item">
          <h3>Différence avec les approches existantes ?</h3>
          <p>Contrairement aux théories des cordes ou LQG, nous ne postulons pas la géométrie. Elle émerge comme attracteur statistique du réseau informationnel.</p>
        </div>
        <div class="faq-item">
          <h3>Comment tester expérimentalement ?</h3>
          <p>12 prédictions quantifiées : corrélations cosmiques, seuils de conscience mesurables, déviations GR dans régimes extrêmes, signatures interférométriques.</p>
        </div>
        <div class="faq-item">
          <h3>Compatibilité avec la physique actuelle ?</h3>
          <p>Extension cohérente : récupère QM et GR comme limites effectives. Pas de contradiction, mais enrichissement du formalisme.</p>
        </div>
        <div class="faq-item">
          <h3>Statut de développement ?</h3>
          <p>Phase de formalisation avancée. Recherche de collaborations pour validation computationnelle et expérimentale.</p>
        </div>
      </div>
    </section>

    <!-- Appel final -->
    <section class="section" style="text-align:center;">
      <h2 class="section-title">Accès au Formalisme Complet</h2>
      <p>Le développement intégral comprend : dérivations mathématiques, protocoles expérimentaux, implications cosmologiques et applications technologiques.</p>
      <div style="margin: 1.2rem 0 0;">
        <a href="LIVRE_COMPLET_URL.pdf" class="btn btn-primary" target="_blank" rel="noopener">📖 Formalisme complet (PDF)</a>
      </div>
      <div style="margin:.8rem 0 0;">
        <a href="/synthese-technique.pdf" class="btn" target="_blank" rel="noopener">📄 Synthèse technique</a>
        <a href="mailto:zmtheorie@gmail.com" class="btn">Collaboration scientifique</a>
      </div>
      <p style="font-style:italic; color:#B0C4DE; margin:1.2rem 0 0; font-size:0.95rem;">
        « Nous proposons que la réalité soit l'expression stable et cohérente d'un champ d'information pure, dans lequel conscience et cosmos ne font qu'un. »
      </p>
    </section>

    <!-- Contact -->
    <div class="contact">
      <p><strong>Collaborations scientifiques et échanges techniques :</strong></p>
      <p>Dr Mohammed Zerrouk — <a href="mailto:zmtheorie@gmail.com" aria-label="Contact scientifique">📧 zmtheorie@gmail.com</a></p>
      <p>Référence : <a href="https://hal.science/hal-05186131v1" target="_blank" rel="noopener">HAL-05186131v1</a> • Archives Ouvertes CNRS</p>
    </div>
  </div>

  <!-- Étoiles animées -->
  <script>
    const far = document.getElementById('stars-far');
    const near = document.getElementById('stars-near');
    const cFar = far.getContext('2d');
    const cNear = near.getContext('2d');

    function sizeCanvas(canvas){
      const ratio = Math.max(window.devicePixelRatio || 1, 1);
      canvas.style.width  = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';
      canvas.width  = Math.floor(window.innerWidth  * ratio);
      canvas.height = Math.floor(window.innerHeight * ratio);
      const ctx = canvas.getContext('2d');
      ctx.setTransform(ratio, 0, 0, ratio, 0, 0);
    }

    let W = 0, H = 0, raf = 0;
    function fit(){
      sizeCanvas(far);
      sizeCanvas(near);
      W = window.innerWidth;
      H = window.innerHeight;
      initStars();
      if (mq.matches){ renderStatic(); }
    }
    window.addEventListener('resize', () => {
      clearTimeout(fit._t);
      fit._t = setTimeout(fit, 120);
    });

    const STAR_COLORS = [
      { color:'#cfe5ff', glow:'#cfe5ff', p:0.28 },
      { color:'#b9d3ff', glow:'#cfe5ff', p:0.22 },
      { color:'#fff6cf', glow:'#ffe9a6', p:0.28 },
      { color:'#ffd1b1', glow:'#ffd7c0', p:0.14 },
      { color:'#ffb3a1', glow:'#ffb3a1', p:0.08 }
    ];
    function pickStarColor(){
      const r = Math.random();
      let acc = 0;
      for(const s of STAR_COLORS){
        acc += s.p;
        if(r <= acc) return {fill:s.color, glow:s.glow};
      }
      return {fill:'#ffffff', glow:'#d9ecff'};
    }

    let starsFar = [], starsNear = [], shooting = [];
    function initStars(){
      const density = Math.max(1.6, Math.min(3.4, (W*H) / (1000*700)));
      const countFar  = Math.floor(620 * density);
      const countNear = Math.floor(420 * density);
      starsFar = createStars(countFar, 0.6, 1.5, 0.010);
      starsNear = createStars(countNear, 1.2, 2.6, 0.018);
      shooting = [];
    }

    function createStars(count, rMin, rMax, speed){
      const arr = [];
      for(let i=0; i<count; i++){
        const c = pickStarColor();
        arr.push({
          x: Math.random()*W,
          y: Math.random()*H,
          r: rMin + Math.random()*(rMax - rMin),
          a: 0.22 + Math.random()*0.78,
          tw: 0.004 + Math.random()*0.012,
          vx: (Math.random()-0.5)*speed,
          vy: (Math.random()-0.5)*speed,
          fill: c.fill,
          glow: c.glow
        });
      }
      return arr;
    }

    function drawLayer(ctx, stars){
      ctx.clearRect(0, 0, W, H);
      for(const s of stars){
        s.a += (Math.random()-0.5)*s.tw;
        if(s.a < 0.16) s.a = 0.16;
        if(s.a > 1.00) s.a = 1.00;

        s.x += s.vx; s.y += s.vy;
        if(s.x < 0) s.x = W; if(s.x > W) s.x = 0;
        if(s.y < 0) s.y = H; if(s.y > H) s.y = 0;

        ctx.save();
        ctx.globalAlpha = s.a;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
        ctx.fillStyle = s.fill;
        ctx.shadowColor = s.glow;
        ctx.shadowBlur = 14 + s.r*3;
        ctx.fill();
        ctx.restore();
      }
    }

    function maybeShoot(){
      if(Math.random() < 0.006 && shooting.length < 2){
        const startY = Math.random()*H*0.6 + H*0.1;
        shooting.push({
          x: Math.random()*W*0.8 + W*0.1,
          y: startY,
          vx: -2 - Math.random()*2,
          vy: -0.6 - Math.random()*0.6,
          life: 1
        });
    
    }
    function drawShooting(ctx){
      for(let i=shooting.length-1; i>=0; i--){
        const sh = shooting[i];
        ctx.save();
        const grad = ctx.createLinearGradient(sh.x, sh.y, sh.x - sh.vx*22, sh.y - sh.vy*22);
        grad.addColorStop(0, `rgba(255,255,255,${0.90*sh.life})`);
        grad.addColorStop(1, `rgba(180,220,255,0)`);
        ctx.strokeStyle = grad;
        ctx.lineWidth = 1.6;
        ctx.beginPath();
        ctx.moveTo(sh.x, sh.y);
        ctx.lineTo(sh.x - sh.vx*22, sh.y - sh.vy*22);
        ctx.stroke();
        ctx.restore();

        sh.x += sh.vx; sh.y += sh.vy;
        sh.life -= 0.02;
        if(sh.life <= 0 || sh.x < -50 || sh.y < -50) shooting.splice(i,1);
      }
    }

    function renderStatic(){
      drawLayer(cFar, starsFar);
      drawLayer(cNear, starsNear);
    }
    function loop(){
      drawLayer(cFar, starsFar);
      drawLayer(cNear, starsNear);
      maybeShoot();
      drawShooting(cNear);
      raf = requestAnimationFrame(loop);
    }

    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
    function motionHandler(e){
      if(e.matches){ cancelAnimationFrame(raf); renderStatic(); }
      else{ cancelAnimationFrame(raf); loop(); }
    }
    if (mq.addEventListener) mq.addEventListener('change', motionHandler);
    else mq.addListener(motionHandler);

    fit();
    if (!mq.matches) loop(); else renderStatic();
  </script>

  <!--
